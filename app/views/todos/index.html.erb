<div class="panel panel-default">
  <div class="panel-heading">
    <div class="panel-title">
      <h1>Listing todos</h1>
    </div>
  </div>

  <div class="panel-body">
    <table class="table">
      <thead>
        <tr>
          <th>Content</th>
          <th>Section</th>
          <th>Date created</th>
          <th>Date completed</th>
          <th colspan="3"></th>
        </tr>
      </thead>

      <tbody>
        <% @todos.each do |todo| %>
          <% if todo.completed %>
            <tr class="completed">
          <% else %>
            <tr>  
          <% end %>
          
          <% if todo.user == current_user %>
            <td><%= todo.content %></td>
            <td><%= todo.section %></td>
            <td><%= todo.date_created %></td>
            <td><%= todo.date_completed %></td>
          

            <% if todo.completed %>
              <td colspan="2">
              <td colspan="2"><%= link_to 'Clear', todo, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-default" %></td>
            <% else %>
              <td><%= link_to 'Show', todo, class: "btn btn-primary" %></td>
              <td><%= link_to 'Edit', edit_todo_path(todo), class: "btn btn-warning" %></td>
              <td><%= link_to 'Complete', todo, method: :completed, data: { confirm: 'Are you sure?'}, class: "btn btn-default"%></td>
              <td><%= link_to 'Destroy', todo, method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" %></td>
            </tr>
            <% end %>
          <% end %>  
        <% end %>  
      </tbody>
    </table>
  </div>

  <br/>
  
  <!--
    div class="center"
      will_paginate @todos, renderer: BootstrapPagination::Rails 
    /div
  -->

  <div class="panel-footer">
    <%= link_to 'New Todo', new_todo_path, class: "btn btn-primary" %>
    
    <%= link_to 'Clear all', @todo, method: :delete, data: { confirm: 'This will clear all completed todos, are you sure?'}, class: "btn btn-default" %>
    
    <div style="float:right">
      <%= link_to 'Create CSV report', @todo, method: :report, data: { confirm: 'This will create a report of completed todos.'}, class: "btn btn-info" %>
    </div>
  </div>
</div>
